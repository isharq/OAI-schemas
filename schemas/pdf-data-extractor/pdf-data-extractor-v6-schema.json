{
  "type": "object",
  "required": ["header", "captured_data", "pages"],
  "properties": {
    "header": {
      "type": "object",
      "required": ["filename", "file_size_mb", "total_slides", "main_deck_slides", "appendix_slides"],
      "properties": {
        "filename": {
          "type": "string",
          "description": "The PDF filename"
        },
        "file_size_mb": {
          "type": "number",
          "description": "File size in megabytes"
        },
        "total_slides": {
          "type": "integer",
          "description": "Total number of pages/slides in the PDF"
        },
        "main_deck_slides": {
          "type": "integer",
          "description": "Number of slides before the appendix starts"
        },
        "appendix_slides": {
          "type": "integer",
          "description": "Number of slides in the appendix section"
        }
      }
    },
    "captured_data": {
      "type": "object",
      "description": "One-time data extractions from across the entire deck. Scan all slides and extract each type of information once when found. Do NOT repeat these fields per-slide.",
      "properties": {
        "market_sizing": {
          "type": "object",
          "properties": {
            "tam": {
              "type": "string",
              "description": "Total Addressable Market value"
            },
            "sam": {
              "type": "string",
              "description": "Serviceable Addressable Market value"
            },
            "som": {
              "type": "string",
              "description": "Serviceable Obtainable Market value"
            },
            "methodology": {
              "type": "string",
              "description": "Market sizing methodology (e.g., 'top-down', 'bottom-up')"
            },
            "sources": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Data sources cited"
            },
            "year": {
              "type": "string",
              "description": "Timeframe for market data"
            },
            "slide_number": {
              "type": "integer",
              "description": "Which slide this data was found on"
            }
          },
          "description": "Extract market sizing information if present anywhere in the deck. Look for TAM/SAM/SOM labels or market value numbers. Leave empty if not present."
        },
        "team_members": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name", "role"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Full name of team member"
              },
              "role": {
                "type": "string",
                "description": "Job title or role"
              },
              "experience": {
                "type": "string",
                "description": "Experience description"
              },
              "companies": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Previous or current company names"
              },
              "type": {
                "type": "string",
                "enum": ["founder", "team", "advisor"],
                "description": "Type of team member"
              },
              "slide_number": {
                "type": "integer",
                "description": "Which slide this person was found on"
              }
            }
          },
          "description": "Extract ALL team members found anywhere in the deck. Look for: names, roles, headshots, bios, company logos. Leave empty if not present."
        },
        "competitors": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["name"],
            "properties": {
              "name": {
                "type": "string",
                "description": "Competitor name"
              },
              "type": {
                "type": "string",
                "enum": ["incumbent", "startup", "substitute", "indirect"],
                "description": "Competitor type as indicated or inferred"
              },
              "description": {
                "type": "string",
                "description": "Competitor description"
              },
              "slide_number": {
                "type": "integer",
                "description": "Which slide this competitor was found on"
              }
            }
          },
          "description": "Extract ALL competitors found anywhere in the deck. Look for: company names in comparison tables, matrices, or competitive landscape sections. IMPORTANT: Extract ALL competitor names shown - do not leave this empty if competitors are visible. Leave empty only if genuinely not present."
        },
        "use_of_funds": {
          "type": "object",
          "properties": {
            "total_raise": {
              "type": "string",
              "description": "Total raise amount"
            },
            "raise_structure": {
              "type": "string",
              "description": "Raise structure type (e.g., 'Pre-Seed', 'Series A', 'SAFE')"
            },
            "timeframe": {
              "type": "string",
              "description": "Fund duration (e.g., '12-18 Month Runway')"
            },
            "allocation": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "category": {
                    "type": "string",
                    "description": "Spending category"
                  },
                  "amount": {
                    "type": "string",
                    "description": "Amount or percentage"
                  },
                  "description": {
                    "type": "string",
                    "description": "Category description"
                  }
                }
              },
              "description": "Fund allocation breakdown"
            },
            "milestones": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "milestone": {
                    "type": "string",
                    "description": "Funding milestone text"
                  },
                  "timeframe": {
                    "type": "string",
                    "description": "Milestone timeframe"
                  },
                  "metric": {
                    "type": "string",
                    "description": "Milestone metric"
                  }
                }
              },
              "description": "Funding-specific milestones (e.g., revenue goals tied to raising next round)"
            },
            "slide_number": {
              "type": "integer",
              "description": "Which slide this data was found on"
            }
          },
          "description": "Extract use of funds information if present anywhere in the deck. Look for: raise amounts, spending breakdowns, pie charts, funding roadmaps. This is for FINANCIAL allocation, not product roadmap. Leave empty if not present."
        },
        "contact_info": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "Contact name"
              },
              "role": {
                "type": "string",
                "description": "Contact role"
              },
              "email": {
                "type": "string",
                "description": "Email address"
              },
              "phone": {
                "type": "string",
                "description": "Phone number"
              },
              "linkedin": {
                "type": "string",
                "description": "LinkedIn URL"
              },
              "slide_number": {
                "type": "integer",
                "description": "Which slide this contact was found on"
              }
            }
          },
          "description": "Extract contact information found anywhere in the deck (typically on final/closing slides)."
        }
      }
    },
    "pages": {
      "type": "array",
      "description": "Per-slide data. Each page object contains ONLY information visibly present on THAT specific slide. DO NOT repeat captured_data fields here.",
      "items": {
        "type": "object",
        "required": ["visual_slide_number", "is_appendix", "detailed_breakdown"],
        "properties": {
          "visual_slide_number": {
            "type": "integer",
            "description": "One-indexed slide number as a human would count (first slide = 1)."
          },
          "is_appendix": {
            "type": "boolean",
            "description": "True if this slide is visually identified as an appendix slide. Appendix indicators: smaller font, 'Appendix' label, reference-style content, footnotes/citations, backup data sections, slides after a clear 'Thank You' or closing slide."
          },
          "detailed_breakdown": {
            "type": "string",
            "description": "Comprehensive visual analysis of THIS slide only. Include ALL key facts, statements, and observations. Describe everything visible: all text in graphics, numbers, charts, tables, images, design elements, layout, visual hierarchy. Vision-first analysis. CRITICAL: Do not describe or reference content from other slides. Only describe what you see on this exact slide."
          },
          "problem_statement": {
            "type": "object",
            "properties": {
              "statement": {
                "type": "string",
                "description": "The core problem statement as written on THIS slide"
              },
              "who_affected": {
                "type": "string",
                "description": "Who experiences this problem as stated on THIS slide"
              },
              "frequency_or_impact": {
                "type": "string",
                "description": "How often or how severely as stated on THIS slide (e.g., 'daily', '$81B annual loss')"
              },
              "situation_context": {
                "type": "string",
                "description": "When/where the problem occurs as stated on THIS slide"
              }
            },
            "description": "ONLY populate if a problem statement is VISIBLY PRESENT on THIS specific slide. Look for: 'The Problem', pain points, customer issues, market gaps. Leave empty if not present on this slide. Multiple slides may have problem statements."
          },
          "links": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "URLs and hyperlinks visible on THIS slide only. Do not include regular text or email addresses (those go in captured_data.contact_info)."
          },
          "traction_metrics": {
            "type": "array",
            "items": {
              "type": "object",
              "required": ["metric", "value"],
              "properties": {
                "metric": {
                  "type": "string",
                  "description": "Metric name as shown on THIS slide (e.g., 'Customers', 'MRR', 'Revenue')"
                },
                "value": {
                  "type": "string",
                  "description": "Metric value as shown on THIS slide (include units)"
                },
                "date": {
                  "type": "string",
                  "description": "Date/period for this metric if shown on THIS slide (e.g., 'Q1 2024', 'Year 1')"
                },
                "context": {
                  "type": "string",
                  "description": "Additional context visible on THIS slide (e.g., 'Target', 'Actual', 'Projected')"
                }
              }
            },
            "description": "ONLY populate if traction metrics are VISIBLY PRESENT on THIS specific slide. Look for: current metrics (revenue, users, customers), target metrics (goals), growth rates. IMPORTANT: Extract from roadmaps, timelines, and goal statements - if you see 'Q1: 30 Customers' or '$39K Target MRR', extract these as metrics. Leave empty only if genuinely not present on this slide. Multiple slides may have metrics."
          },
          "operating_plan": {
            "type": "object",
            "properties": {
              "timeframe": {
                "type": "string",
                "description": "Operating plan timeframe visible on THIS slide (e.g., 'Year 1', '12-18 months')"
              },
              "milestones": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "milestone": {
                      "type": "string",
                      "description": "Milestone description visible on THIS slide"
                    },
                    "timeframe": {
                      "type": "string",
                      "description": "When this milestone is targeted on THIS slide (e.g., 'Q1', 'Month 6')"
                    },
                    "category": {
                      "type": "string",
                      "enum": ["product", "customer", "revenue", "hiring", "partnership", "other"],
                      "description": "Type of milestone"
                    }
                  }
                },
                "description": "Specific milestones visible on THIS slide"
              }
            },
            "description": "ONLY populate if operating plan or roadmap is VISIBLY PRESENT on THIS specific slide. Look for: timelines, roadmaps, quarterly goals, milestone charts. IMPORTANT: This is separate from use_of_funds - extract timeline-based goals here. Leave empty if not present on this slide. Multiple slides may have operating plans."
          }
        }
      }
    }
  }
}
